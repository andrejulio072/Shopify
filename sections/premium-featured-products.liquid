{{ 'premium-featured-products.css' | asset_url | stylesheet_tag }}

<style>
  .premium-featured-products {
    padding: 100px 0;
    background: #f8f9fa;
  }

  .premium-featured-products__container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 20px;
  }

  .premium-featured-products__header {
    text-align: center;
    margin-bottom: 60px;
  }

  .premium-featured-products__title {
    font-size: clamp(2rem, 4vw, 3rem);
    font-weight: 800;
    color: #000000;
    margin-bottom: 15px;
    letter-spacing: -0.02em;
  }

  .premium-featured-products__subtitle {
    font-size: 18px;
    color: #6c757d;
    max-width: 600px;
    margin: 0 auto 30px;
    line-height: 1.6;
  }

  .premium-featured-products__tabs {
    display: flex;
    justify-content: center;
    gap: 30px;
    margin-bottom: 50px;
    flex-wrap: wrap;
  }

  .premium-featured-products__tab {
    background: transparent;
    border: 2px solid #e9ecef;
    color: #6c757d;
    padding: 12px 24px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .premium-featured-products__tab.active,
  .premium-featured-products__tab:hover {
    border-color: #000000;
    color: #000000;
    background: #ffffff;
  }

  .premium-featured-products__grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 30px;
    margin-bottom: 50px;
  }

  .product-card-premium {
    background: #ffffff;
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.4s ease;
    border: 1px solid #f1f3f4;
    position: relative;
  }

  .product-card-premium:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
    border-color: #e9ecef;
  }

  .product-card-premium__image-wrapper {
    position: relative;
    height: 280px;
    overflow: hidden;
    background: #f8f9fa;
  }

  .product-card-premium__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.4s ease;
  }

  .product-card-premium:hover .product-card-premium__image {
    transform: scale(1.05);
  }

  .product-card-premium__badges {
    position: absolute;
    top: 15px;
    left: 15px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    z-index: 2;
  }

  .product-card-premium__badge {
    background: #000000;
    color: #ffffff;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .product-card-premium__badge--sale {
    background: #dc3545;
  }

  .product-card-premium__badge--new {
    background: #28a745;
  }

  .product-card-premium__actions {
    position: absolute;
    top: 15px;
    right: 15px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    opacity: 0;
    transform: translateY(-10px);
    transition: all 0.3s ease;
  }

  .product-card-premium:hover .product-card-premium__actions {
    opacity: 1;
    transform: translateY(0);
  }

  .product-card-premium__action {
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.9);
    border: none;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 16px;
  }

  .product-card-premium__action:hover {
    background: #000000;
    color: #ffffff;
    transform: scale(1.1);
  }

  .product-card-premium__quick-add {
    position: absolute;
    bottom: 15px;
    left: 15px;
    right: 15px;
    background: #000000;
    color: #ffffff;
    border: none;
    padding: 12px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transform: translateY(10px);
    opacity: 0;
    transition: all 0.3s ease;
  }

  .product-card-premium:hover .product-card-premium__quick-add {
    transform: translateY(0);
    opacity: 1;
  }

  .product-card-premium__quick-add:hover {
    background: #2c3e50;
  }

  .product-card-premium__content {
    padding: 20px;
  }

  .product-card-premium__vendor {
    font-size: 12px;
    color: #6c757d;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 5px;
    font-weight: 600;
  }

  .product-card-premium__title {
    font-size: 16px;
    font-weight: 600;
    color: #2c3e50;
    margin-bottom: 8px;
    line-height: 1.3;
    min-height: 40px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .product-card-premium__title a {
    color: inherit;
    text-decoration: none;
  }

  .product-card-premium__title a:hover {
    color: #000000;
  }

  .product-card-premium__rating {
    display: flex;
    align-items: center;
    gap: 5px;
    margin-bottom: 10px;
  }

  .product-card-premium__stars {
    color: #ffc107;
    font-size: 14px;
  }

  .product-card-premium__rating-count {
    font-size: 12px;
    color: #6c757d;
  }

  .product-card-premium__price {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 15px;
  }

  .product-card-premium__price-current {
    font-size: 18px;
    font-weight: 700;
    color: #000000;
  }

  .product-card-premium__price-original {
    font-size: 14px;
    color: #6c757d;
    text-decoration: line-through;
  }

  .product-card-premium__price-save {
    background: #dc3545;
    color: #ffffff;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 600;
  }

  .product-card-premium__variants {
    display: flex;
    gap: 6px;
    margin-bottom: 15px;
  }

  .product-card-premium__variant {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    border: 2px solid #e9ecef;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
  }

  .product-card-premium__variant:hover,
  .product-card-premium__variant.active {
    border-color: #000000;
    transform: scale(1.1);
  }

  .product-card-premium__variant::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: var(--variant-color, #e9ecef);
  }

  .premium-featured-products__footer {
    text-align: center;
  }

  .premium-featured-products__view-all {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: #000000;
    color: #ffffff;
    padding: 15px 30px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s ease;
  }

  .premium-featured-products__view-all:hover {
    background: #2c3e50;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    color: #ffffff;
  }

  /* Responsive */
  @media screen and (max-width: 990px) {
    .premium-featured-products {
      padding: 80px 0;
    }

    .premium-featured-products__grid {
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 25px;
    }

    .premium-featured-products__tabs {
      gap: 15px;
    }

    .premium-featured-products__tab {
      padding: 10px 20px;
      font-size: 14px;
    }
  }

  @media screen and (max-width: 768px) {
    .premium-featured-products {
      padding: 60px 0;
    }

    .premium-featured-products__container {
      padding: 0 15px;
    }

    .premium-featured-products__grid {
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }

    .product-card-premium__image-wrapper {
      height: 220px;
    }

    .product-card-premium__content {
      padding: 15px;
    }

    .product-card-premium__actions {
      position: static;
      flex-direction: row;
      justify-content: center;
      opacity: 1;
      transform: none;
      margin-top: 10px;
    }

    .product-card-premium__quick-add {
      position: static;
      transform: none;
      opacity: 1;
      margin-top: 10px;
    }

    .premium-featured-products__tabs {
      flex-direction: column;
      align-items: center;
    }

    .premium-featured-products__tab {
      width: 100%;
      max-width: 200px;
      text-align: center;
    }
  }

  /* Animation */
  .product-card-premium {
    opacity: 0;
    transform: translateY(30px);
    animation: fadeInUp 0.6s ease forwards;
  }

  .product-card-premium:nth-child(1) { animation-delay: 0.1s; }
  .product-card-premium:nth-child(2) { animation-delay: 0.2s; }
  .product-card-premium:nth-child(3) { animation-delay: 0.3s; }
  .product-card-premium:nth-child(4) { animation-delay: 0.4s; }
  .product-card-premium:nth-child(5) { animation-delay: 0.5s; }
  .product-card-premium:nth-child(6) { animation-delay: 0.6s; }
  .product-card-premium:nth-child(7) { animation-delay: 0.7s; }
  .product-card-premium:nth-child(8) { animation-delay: 0.8s; }

  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>

<section class="premium-featured-products">
  <div class="premium-featured-products__container">

    {%- unless section.settings.title == blank -%}
      <div class="premium-featured-products__header">
        <h2 class="premium-featured-products__title">{{ section.settings.title }}</h2>
        {%- unless section.settings.subtitle == blank -%}
          <p class="premium-featured-products__subtitle">{{ section.settings.subtitle }}</p>
        {%- endunless -%}

        {%- if section.settings.show_tabs -%}
          <div class="premium-featured-products__tabs">
            <button class="premium-featured-products__tab active" data-tab="all">Todos</button>
            <button class="premium-featured-products__tab" data-tab="new">Novos</button>
            <button class="premium-featured-products__tab" data-tab="sale">Promoções</button>
            <button class="premium-featured-products__tab" data-tab="popular">Populares</button>
          </div>
        {%- endif -%}
      </div>
    {%- endunless -%}

    <div class="premium-featured-products__grid">
      {%- if section.settings.collection != blank -%}
        {%- assign collection = collections[section.settings.collection] -%}
        {%- for product in collection.products limit: section.settings.products_to_show -%}
          <div class="product-card-premium" data-product-id="{{ product.id }}">

            <!-- Image -->
            <div class="product-card-premium__image-wrapper">
              <a href="{{ product.url }}">
                {%- if product.featured_media -%}
                  {{
                    product.featured_media
                    | image_url: width: 400
                    | image_tag:
                      loading: 'lazy',
                      class: 'product-card-premium__image',
                      alt: product.featured_media.alt | escape
                  }}
                {%- else -%}
                  <div style="width: 100%; height: 100%; background: #f8f9fa; display: flex; align-items: center; justify-content: center; color: #6c757d;">
                    Sem imagem
                  </div>
                {%- endif -%}
              </a>

              <!-- Badges -->
              <div class="product-card-premium__badges">
                {%- if product.compare_at_price > product.price -%}
                  <span class="product-card-premium__badge product-card-premium__badge--sale">
                    -{{ product.compare_at_price | minus: product.price | times: 100 | divided_by: product.compare_at_price | round }}%
                  </span>
                {%- endif -%}
                {%- assign days_since_published = 'now' | date: '%s' | minus: product.published_at | date: '%s' | divided_by: 86400 -%}
                {%- if days_since_published <= 30 -%}
                  <span class="product-card-premium__badge product-card-premium__badge--new">Novo</span>
                {%- endif -%}
              </div>

              <!-- Actions -->
              <div class="product-card-premium__actions">
                <button class="product-card-premium__action" title="Favoritos">♡</button>
                <button class="product-card-premium__action" title="Visualização rápida">👁</button>
              </div>

              <!-- Quick Add -->
              <button class="product-card-premium__quick-add" data-product-id="{{ product.id }}">
                Adicionar ao Carrinho
              </button>
            </div>

            <!-- Content -->
            <div class="product-card-premium__content">
              {%- unless product.vendor == blank -%}
                <div class="product-card-premium__vendor">{{ product.vendor }}</div>
              {%- endunless -%}

              <h3 class="product-card-premium__title">
                <a href="{{ product.url }}">{{ product.title }}</a>
              </h3>

              {%- if section.settings.show_rating -%}
                <div class="product-card-premium__rating">
                  <span class="product-card-premium__stars">⭐⭐⭐⭐⭐</span>
                  <span class="product-card-premium__rating-count">({{ 10 | plus: forloop.index | times: 3 }})</span>
                </div>
              {%- endif -%}

              <div class="product-card-premium__price">
                <span class="product-card-premium__price-current">
                  {{ product.price | money }}
                </span>
                {%- if product.compare_at_price > product.price -%}
                  <span class="product-card-premium__price-original">
                    {{ product.compare_at_price | money }}
                  </span>
                  <span class="product-card-premium__price-save">
                    Economize {{ product.compare_at_price | minus: product.price | money }}
                  </span>
                {%- endif -%}
              </div>

              {%- if product.variants.size > 1 and section.settings.show_variants -%}
                <div class="product-card-premium__variants">
                  {%- for variant in product.variants limit: 5 -%}
                    {%- if variant.option1 contains 'color' or variant.option1 contains 'cor' -%}
                      <div class="product-card-premium__variant"
                           style="--variant-color: {{ variant.option1 | downcase | replace: ' ', '' }}"
                           title="{{ variant.option1 }}"></div>
                    {%- endif -%}
                  {%- endfor -%}
                </div>
              {%- endif -%}
            </div>
          </div>
        {%- endfor -%}
      {%- else -%}
        <!-- Placeholder products -->
        {%- for i in (1..8) -%}
          <div class="product-card-premium">
            <div class="product-card-premium__image-wrapper">
              <div style="width: 100%; height: 100%; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); display: flex; align-items: center; justify-content: center; color: #6c757d;">
                Produto {{ i }}
              </div>
            </div>
            <div class="product-card-premium__content">
              <div class="product-card-premium__vendor">Marca</div>
              <h3 class="product-card-premium__title">Produto Exemplo {{ i }}</h3>
              <div class="product-card-premium__rating">
                <span class="product-card-premium__stars">⭐⭐⭐⭐⭐</span>
                <span class="product-card-premium__rating-count">({{ i | times: 10 }})</span>
              </div>
              <div class="product-card-premium__price">
                <span class="product-card-premium__price-current">R$ {{ i | times: 50 | plus: 100 }},00</span>
              </div>
            </div>
          </div>
        {%- endfor -%}
      {%- endif -%}
    </div>

    {%- if section.settings.show_view_all -%}
      <div class="premium-featured-products__footer">
        <a href="{{ collections[section.settings.collection].url | default: collections.all.url }}"
           class="premium-featured-products__view-all">
          {{ section.settings.view_all_text | default: 'Ver Todos os Produtos' }}
          <span>→</span>
        </a>
      </div>
    {%- endif -%}
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Tab functionality
  const tabs = document.querySelectorAll('.premium-featured-products__tab');
  const products = document.querySelectorAll('.product-card-premium');

  tabs.forEach(tab => {
    tab.addEventListener('click', function() {
      // Remove active class from all tabs
      tabs.forEach(t => t.classList.remove('active'));
      // Add active class to clicked tab
      this.classList.add('active');

      const filter = this.getAttribute('data-tab');

      products.forEach(product => {
        if (filter === 'all') {
          product.style.display = 'block';
        } else if (filter === 'new') {
          const hasNewBadge = product.querySelector('.product-card-premium__badge--new');
          product.style.display = hasNewBadge ? 'block' : 'none';
        } else if (filter === 'sale') {
          const hasSaleBadge = product.querySelector('.product-card-premium__badge--sale');
          product.style.display = hasSaleBadge ? 'block' : 'none';
        } else if (filter === 'popular') {
          // Show products with higher rating count
          const ratingElement = product.querySelector('.product-card-premium__rating-count');
          if (ratingElement) {
            const count = parseInt(ratingElement.textContent.match(/\d+/)[0]);
            product.style.display = count > 20 ? 'block' : 'none';
          }
        }
      });
    });
  });

  // Quick add functionality
  const quickAddButtons = document.querySelectorAll('.product-card-premium__quick-add');
  quickAddButtons.forEach(button => {
    button.addEventListener('click', function() {
      const productId = this.getAttribute('data-product-id');
      // Add your cart functionality here
      this.textContent = 'Adicionado!';
      setTimeout(() => {
        this.textContent = 'Adicionar ao Carrinho';
      }, 2000);
    });
  });
});
</script>

{% schema %}
{
  "name": "Produtos em Destaque Premium",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "default": "Produtos em Destaque",
      "label": "Título da seção"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "default": "Descubra nossa seleção cuidadosa dos melhores produtos",
      "label": "Subtítulo"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Coleção"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 4,
      "max": 20,
      "step": 2,
      "default": 8,
      "label": "Produtos para mostrar"
    },
    {
      "type": "checkbox",
      "id": "show_tabs",
      "default": true,
      "label": "Mostrar abas de filtro"
    },
    {
      "type": "checkbox",
      "id": "show_rating",
      "default": true,
      "label": "Mostrar avaliações"
    },
    {
      "type": "checkbox",
      "id": "show_variants",
      "default": true,
      "label": "Mostrar variantes de cor"
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "default": true,
      "label": "Mostrar botão 'Ver Todos'"
    },
    {
      "type": "text",
      "id": "view_all_text",
      "default": "Ver Todos os Produtos",
      "label": "Texto do botão 'Ver Todos'"
    }
  ],
  "presets": [
    {
      "name": "Produtos em Destaque Premium"
    }
  ]
}
{% endschema %}
