<!--
========================================
ðŸš€ PREMIUM FITNESS HEADER V2.0
International Standards | Conversion Optimized
Inspired by: Gymshark, MyProtein, Alphalete
========================================
-->

<link rel="stylesheet" href="{{ 'premium-v2.css' | asset_url }}">

<style>
  .premium-header {
    position: relative;
    background: linear-gradient(135deg, var(--color-black) 0%, var(--color-charcoal) 100%);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(20px);
    z-index: var(--z-sticky);
  }

  .sticky-header {
    position: sticky;
    top: 0;
    transition: var(--transition-normal);
  }

  .announcement-bar {
    background: linear-gradient(90deg, var(--color-electric-blue) 0%, var(--color-neon-green) 100%);
    padding: var(--space-2) 0;
    text-align: center;
    overflow: hidden;
  }

  .announcement-text {
    color: var(--color-white);
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    animation: slide-in-right 1s ease-out;
  }

  .header-main {
    padding: var(--space-4) 0;
  }

  .header-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-8);
  }

  .logo-section {
    display: flex;
    align-items: center;
    flex-shrink: 0;
  }

  .logo {
    font-size: var(--text-2xl);
    font-weight: var(--font-black);
    color: var(--color-white);
    text-decoration: none;
    text-transform: uppercase;
    letter-spacing: -0.02em;
    transition: var(--transition-normal);
  }

  .logo:hover {
    color: var(--color-electric-blue);
    transform: scale(1.05);
  }

  .nav-menu {
    display: none;
    flex: 1;
    justify-content: center;
  }

  .nav-list {
    display: flex;
    list-style: none;
    margin: 0;
    padding: 0;
    gap: var(--space-8);
  }

  .nav-item {
    position: relative;
  }

  .nav-link {
    color: var(--color-white);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    text-decoration: none;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: var(--space-3) var(--space-4);
    border-radius: var(--radius-lg);
    transition: var(--transition-normal);
    position: relative;
    display: flex;
    align-items: center;
    gap: var(--space-1);
  }

  .nav-link::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 50%;
    width: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--color-electric-blue), var(--color-neon-green));
    transition: var(--transition-normal);
    transform: translateX(-50%);
  }

  .nav-link:hover::after {
    width: 100%;
  }

  .nav-link:hover {
    color: var(--color-electric-blue);
    background-color: rgba(255, 255, 255, 0.05);
  }

  .header-actions {
    display: flex;
    align-items: center;
    gap: var(--space-4);
  }

  .search-toggle,
  .account-link,
  .cart-link {
    color: var(--color-white);
    padding: var(--space-3);
    border-radius: var(--radius-lg);
    transition: var(--transition-normal);
    position: relative;
    background: transparent;
    border: none;
    cursor: pointer;
  }

  .search-toggle:hover,
  .account-link:hover,
  .cart-link:hover {
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--color-electric-blue);
    transform: scale(1.1);
  }

  .cart-count {
    position: absolute;
    top: -4px;
    right: -4px;
    background: linear-gradient(135deg, var(--color-neon-green) 0%, #28B946 100%);
    color: var(--color-white);
    border-radius: var(--radius-full);
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--text-xs);
    font-weight: var(--font-bold);
    animation: pulse 2s infinite;
  }

  .mobile-menu-toggle {
    display: flex;
    background: transparent;
    border: none;
    color: var(--color-white);
    padding: var(--space-3);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: var(--transition-normal);
  }

  .mobile-menu-toggle:hover {
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--color-electric-blue);
  }

  /* MEGA MENU */
  .mega-menu {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: linear-gradient(135deg, var(--color-white) 0%, var(--color-gray-50) 100%);
    border-top: 1px solid var(--color-gray-200);
    box-shadow: var(--shadow-2xl);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: var(--transition-normal);
    z-index: var(--z-dropdown);
  }

  .nav-item:hover .mega-menu {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  .mega-menu-content {
    padding: var(--space-8) 0;
  }

  .mega-menu-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-8);
  }

  .mega-menu-section h3 {
    color: var(--color-black);
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    margin-bottom: var(--space-4);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .mega-menu-links {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .mega-menu-links li {
    margin-bottom: var(--space-2);
  }

  .mega-menu-links a {
    color: var(--color-gray-600);
    font-size: var(--text-sm);
    text-decoration: none;
    transition: var(--transition-normal);
    display: block;
    padding: var(--space-1) 0;
  }

  .mega-menu-links a:hover {
    color: var(--color-electric-blue);
    transform: translateX(4px);
  }

  .mega-menu-feature {
    background: linear-gradient(135deg, var(--color-electric-blue) 0%, var(--color-neon-green) 100%);
    border-radius: var(--radius-xl);
    padding: var(--space-6);
    color: var(--color-white);
    text-align: center;
  }

  .mega-menu-feature h4 {
    color: var(--color-white);
    font-size: var(--text-xl);
    font-weight: var(--font-bold);
    margin-bottom: var(--space-2);
  }

  .mega-menu-feature p {
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: var(--space-4);
  }

  /* SEARCH OVERLAY */
  .search-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(10px);
    z-index: var(--z-modal);
    opacity: 0;
    visibility: hidden;
    transition: var(--transition-normal);
  }

  .search-overlay.active {
    opacity: 1;
    visibility: visible;
  }

  .search-content {
    position: absolute;
    top: 20%;
    left: 50%;
    transform: translateX(-50%);
    width: 90%;
    max-width: 600px;
  }

  .search-form {
    position: relative;
  }

  .search-input {
    width: 100%;
    padding: var(--space-5) var(--space-6);
    font-size: var(--text-2xl);
    background: var(--color-white);
    border: none;
    border-radius: var(--radius-2xl);
    color: var(--color-black);
    box-shadow: var(--shadow-2xl);
  }

  .search-input::placeholder {
    color: var(--color-gray-400);
  }

  /* MOBILE MENU */
  .mobile-menu {
    position: fixed;
    top: 0;
    right: -100%;
    width: 100%;
    max-width: 400px;
    height: 100vh;
    background: linear-gradient(135deg, var(--color-black) 0%, var(--color-charcoal) 100%);
    z-index: var(--z-modal);
    transition: var(--transition-slow);
    overflow-y: auto;
  }

  .mobile-menu.active {
    right: 0;
  }

  .mobile-menu-header {
    display: flex;
    justify-content: between;
    align-items: center;
    padding: var(--space-6);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }

  .mobile-menu-close {
    background: transparent;
    border: none;
    color: var(--color-white);
    padding: var(--space-3);
    border-radius: var(--radius-lg);
    cursor: pointer;
    margin-left: auto;
  }

  .mobile-nav-list {
    list-style: none;
    margin: 0;
    padding: var(--space-6);
  }

  .mobile-nav-item {
    margin-bottom: var(--space-4);
  }

  .mobile-nav-link {
    color: var(--color-white);
    font-size: var(--text-lg);
    font-weight: var(--font-medium);
    text-decoration: none;
    display: block;
    padding: var(--space-4);
    border-radius: var(--radius-lg);
    transition: var(--transition-normal);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .mobile-nav-link:hover {
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--color-electric-blue);
  }

  /* RESPONSIVE */
  @media (min-width: 1024px) {
    .nav-menu {
      display: flex;
    }

    .mobile-menu-toggle {
      display: none;
    }
  }

  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
  }
</style>

<!-- ANNOUNCEMENT BAR -->
<div class="announcement-bar">
  <div class="container container-premium">
    <div class="announcement-text">
      ðŸ”¥ {{ section.settings.announcement_text | default: "FREE SHIPPING ON ORDERS OVER $75 | NEW ARRIVALS NOW LIVE" }}
    </div>
  </div>
</div>

<!-- MAIN HEADER -->
<header class="premium-header sticky-header">
  <div class="header-main">
    <div class="container container-premium">
      <div class="header-content">

        <!-- LOGO -->
        <div class="logo-section">
          <a href="{{ routes.root_url }}" class="logo">
            {% if section.settings.logo %}
              {{ section.settings.logo | image_url: width: 200 | image_tag: loading: 'lazy', alt: shop.name }}
            {% else %}
              {{ shop.name }}
            {% endif %}
          </a>
        </div>

        <!-- NAVIGATION MENU -->
        <nav class="nav-menu">
          <ul class="nav-list">
            {% for link in linklists.main-menu.links %}
              <li class="nav-item">
                <a href="{{ link.url }}" class="nav-link">
                  {{ link.title }}
                  {% if link.links.size > 0 %}
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none">
                      <path d="M1 1.5L6 6.5L11 1.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  {% endif %}
                </a>

                {% if link.links.size > 0 %}
                  <div class="mega-menu">
                    <div class="container container-premium">
                      <div class="mega-menu-content">
                        <div class="mega-menu-grid">
                          {% assign link_count = link.links.size %}
                          {% assign links_per_column = link_count | divided_by: 3.0 | ceil %}

                          {% for i in (1..3) %}
                            <div class="mega-menu-section">
                              {% assign start_index = forloop.index0 | times: links_per_column %}
                              {% assign end_index = start_index | plus: links_per_column | minus: 1 %}

                              {% if i == 1 %}
                                <h3>{{ section.settings.menu_title_1 | default: "SUPPLEMENTS" }}</h3>
                              {% elsif i == 2 %}
                                <h3>{{ section.settings.menu_title_2 | default: "APPAREL" }}</h3>
                              {% else %}
                                <h3>{{ section.settings.menu_title_3 | default: "ACCESSORIES" }}</h3>
                              {% endif %}

                              <ul class="mega-menu-links">
                                {% for child_link in link.links limit: links_per_column offset: start_index %}
                                  <li><a href="{{ child_link.url }}">{{ child_link.title }}</a></li>
                                {% endfor %}
                              </ul>
                            </div>
                          {% endfor %}

                          <!-- FEATURED SECTION -->
                          <div class="mega-menu-feature">
                            <h4>{{ section.settings.feature_title | default: "NEW ARRIVALS" }}</h4>
                            <p>{{ section.settings.feature_text | default: "Discover our latest premium supplements and gear" }}</p>
                            <a href="{{ section.settings.feature_link | default: '/collections/new' }}" class="btn btn-secondary btn-sm">
                              {{ section.settings.feature_button_text | default: "SHOP NOW" }}
                            </a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                {% endif %}
              </li>
            {% endfor %}
          </ul>
        </nav>

        <!-- HEADER ACTIONS -->
        <div class="header-actions">
          <!-- Search -->
          <button type="button" class="search-toggle" onclick="toggleSearch()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
          </button>

          <!-- Account -->
          <a href="{{ routes.account_url }}" class="account-link">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
          </a>

          <!-- Cart -->
          <a href="{{ routes.cart_url }}" class="cart-link">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 22a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path>
              <path d="M20 22a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path>
              <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            {% if cart.item_count > 0 %}
              <span class="cart-count">{{ cart.item_count }}</span>
            {% endif %}
          </a>

          <!-- Mobile Menu Toggle -->
          <button type="button" class="mobile-menu-toggle" onclick="toggleMobileMenu()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="3" y1="6" x2="21" y2="6"></line>
              <line x1="3" y1="12" x2="21" y2="12"></line>
              <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
</header>

<!-- SEARCH OVERLAY -->
<div class="search-overlay" id="searchOverlay">
  <div class="search-content">
    <form action="{{ routes.search_url }}" method="get" class="search-form">
      <input
        type="search"
        name="q"
        class="search-input"
        placeholder="Search products, brands, categories..."
        autocomplete="off"
        id="searchInput"
      >
    </form>
  </div>
</div>

<!-- MOBILE MENU -->
<div class="mobile-menu" id="mobileMenu">
  <div class="mobile-menu-header">
    <div class="logo">{{ shop.name }}</div>
    <button type="button" class="mobile-menu-close" onclick="toggleMobileMenu()">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
  </div>

  <ul class="mobile-nav-list">
    {% for link in linklists.main-menu.links %}
      <li class="mobile-nav-item">
        <a href="{{ link.url }}" class="mobile-nav-link">{{ link.title }}</a>
      </li>
    {% endfor %}
  </ul>
</div>

<script>
  function toggleSearch() {
    const overlay = document.getElementById('searchOverlay');
    const input = document.getElementById('searchInput');

    overlay.classList.toggle('active');

    if (overlay.classList.contains('active')) {
      setTimeout(() => input.focus(), 100);
    }
  }

  function toggleMobileMenu() {
    const menu = document.getElementById('mobileMenu');
    menu.classList.toggle('active');
    document.body.style.overflow = menu.classList.contains('active') ? 'hidden' : '';
  }

  // Close search with Escape key
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      document.getElementById('searchOverlay').classList.remove('active');
      document.getElementById('mobileMenu').classList.remove('active');
      document.body.style.overflow = '';
    }
  });

  // Close search when clicking outside
  document.getElementById('searchOverlay').addEventListener('click', function(e) {
    if (e.target === this) {
      this.classList.remove('active');
    }
  });
</script>

{% schema %}
{
  "name": "Premium Header V2",
  "tag": "header",
  "class": "premium-header-section",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo Image"
    },
    {
      "type": "text",
      "id": "announcement_text",
      "label": "Announcement Text",
      "default": "ðŸ”¥ FREE SHIPPING ON ORDERS OVER $75 | NEW ARRIVALS NOW LIVE"
    },
    {
      "type": "header",
      "content": "Mega Menu Settings"
    },
    {
      "type": "text",
      "id": "menu_title_1",
      "label": "Menu Column 1 Title",
      "default": "SUPPLEMENTS"
    },
    {
      "type": "text",
      "id": "menu_title_2",
      "label": "Menu Column 2 Title",
      "default": "APPAREL"
    },
    {
      "type": "text",
      "id": "menu_title_3",
      "label": "Menu Column 3 Title",
      "default": "ACCESSORIES"
    },
    {
      "type": "text",
      "id": "feature_title",
      "label": "Feature Section Title",
      "default": "NEW ARRIVALS"
    },
    {
      "type": "text",
      "id": "feature_text",
      "label": "Feature Section Text",
      "default": "Discover our latest premium supplements and gear"
    },
    {
      "type": "url",
      "id": "feature_link",
      "label": "Feature Section Link",
      "default": "/collections/new"
    },
    {
      "type": "text",
      "id": "feature_button_text",
      "label": "Feature Button Text",
      "default": "SHOP NOW"
    }
  ]
}
{% endschema %}
